<mat-card>
  <mat-card-header class="mat-card-header mat-primary rounded-top">
    <mat-card-title class="d-flex justify-content-between w-100">Student Mark Analysis</mat-card-title>
    @if (isRequestValid()) {
    <fw-download icon="print" [disableclick]="true" (click)="openPrintPopup()" desc="Print Mark Analysis" class="pe-1"></fw-download>
    }
  </mat-card-header>
  <div class="scrolldiv">
    <mat-card-content class="p-2 z-80">
      <form id="MarkReport">
        <app-CommonFilter-Admin [apiurl]="apidetailsadmin" [parameter]="filterparameteradmin" [triggercatch]="triggercatch" (parameterChange)="onParameterChange($event)" [(Semester)]="request.semester"></app-CommonFilter-Admin>
        <!-- <app-CommonFilter [apiurl]="apidetails" class="" [parameter]="filterparameter" [triggercatch]="triggercatch" (parameterChange)="onParameterChange($event)" [(Semester)]="request.semester">
          <div class="section-one">
            <fw-select entity="semester" label="Semester" apiUrl="/Common/GetSemesterList" valueAndname="value,text" [isrequired]="true" [apicache]="true" [triggerAPIOnload]="true" [(modelValue)]="request.semester"></fw-select>
          </div>
          <div class="section-two">
            <fw-select entity="examtype" label="Exam Type" [isrequired]="true" [(modelValue)]="request.examType" commaSeparatedString="Internal I,Internal II,Model"></fw-select>
          </div>
        </app-CommonFilter> -->
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-2 col-xl-2"><fw-select entity="semester" label="Semester" apiUrl="/Common/GetSemesterList" valueAndname="value,text" [isrequired]="true" [apicache]="true" [triggerAPIOnload]="true" [(modelValue)]="request.semester"></fw-select></div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-2 col-xl-2"><fw-select entity="examtype" label="Exam Type" [isrequired]="true" [(modelValue)]="request.examType" commaSeparatedString="Internal I,Internal II,Model"></fw-select></div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-2 col-xl-2"></div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-2 col-xl-2"></div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-2 col-xl-2 pt-3"></div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-2 col-xl-2 pt-3 d-flex">
            <fw-button label="View" buttontype="S" [loading]="_loading" (formvalidationtrue)="GetGridList()"></fw-button>
          </div>
        </div>

        <div class="row" #tableContainer>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
            <div class="table-wrapper pt-2">
              <table mat-table [dataSource]="grid1response" class="mat-elevation-z8 full-width-table">
                <!-- Dynamic Header -->
                <ng-container *ngFor="let column of displayedColumnsgrid1" [matColumnDef]="column">
                  <th mat-header-cell *matHeaderCellDef>
                    {{ columnHeader1Map[column] || column }}
                  </th>
                  <td mat-cell *matCellDef="let row; let i = index">
                    {{ getValuegrid1(row, column, i) }}
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumnsgrid1"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsgrid1"></tr>
              </table>
            </div>
            <div class="table-wrapper pt-2">
              <table mat-table [dataSource]="grid2response" class="mat-elevation-z8 full-width-table">
                <!-- Dynamic Header -->
                <ng-container *ngFor="let column of displayedColumnsgrid2" [matColumnDef]="column">
                  <th mat-header-cell *matHeaderCellDef>
                    {{ columnHeader2Map[column] || column }}
                  </th>
                  <td mat-cell *matCellDef="let row; let i = index">
                    {{ getValuegrid2(row, column, i) }}
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumnsgrid2"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsgrid2"></tr>
              </table>
            </div>
            <div class="table-wrapper pt-2">
              <table mat-table [dataSource]="grid3response" class="mat-elevation-z8 full-width-table">
                <!-- Dynamic Header -->
                <ng-container *ngFor="let column of displayedColumnsgrid3" [matColumnDef]="column">
                  <th mat-header-cell *matHeaderCellDef>
                    {{ columnHeader3Map[column] || column }}
                  </th>
                  <td mat-cell *matCellDef="let row; let i = index">
                    {{ getValuegrid3(row, column, i) }}
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumnsgrid3"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsgrid3"></tr>
              </table>
            </div>
          </div>
        </div>
      </form>
    </mat-card-content>
  </div>
</mat-card>
